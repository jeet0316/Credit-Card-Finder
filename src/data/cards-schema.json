{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Credit Card Schema - Comprehensive",
  "description": "Comprehensive schema for credit card data with identity, costs, rewards, perks, and trust fields",
  "type": "array",
  "items": {
    "type": "object",
    "required": [
      "id",
      "name",
      "issuer",
      "identity",
      "costs",
      "rewards",
      "trust"
    ],
    "properties": {
      "id": {
        "type": "string",
        "description": "Unique identifier for the card (lowercase, hyphenated)"
      },
      "name": {
        "type": "string",
        "description": "Full official name of the credit card"
      },
      "issuer": {
        "type": "string",
        "description": "Bank/issuer name (e.g., 'Chase', 'American Express', 'Capital One')"
      },
      "identity": {
        "type": "object",
        "description": "Card identity and type classification",
        "properties": {
          "isStudentCard": {
            "type": "boolean",
            "description": "Is this a student credit card?"
          },
          "isBusinessCard": {
            "type": "boolean",
            "description": "Is this a business credit card?"
          },
          "starterFriendly": {
            "type": "boolean",
            "description": "Is this card good for people with limited/no credit history (build credit, first card)?"
          }
        },
        "required": ["isStudentCard", "isBusinessCard", "starterFriendly"]
      },
      "costs": {
        "type": "object",
        "description": "Costs and fees associated with the card",
        "properties": {
          "annualFee": {
            "type": "number",
            "minimum": 0,
            "description": "Annual fee in dollars (0 if no annual fee)"
          },
          "aprPurchase": {
            "type": "object",
            "description": "Purchase APR (Annual Percentage Rate)",
            "properties": {
              "min": {
                "type": "number",
                "minimum": 0,
                "description": "Minimum APR percentage (e.g., 19.24)"
              },
              "max": {
                "type": "number",
                "minimum": 0,
                "description": "Maximum APR percentage (e.g., 26.99). If same as min, it's a fixed rate."
              }
            },
            "required": ["min", "max"]
          },
          "foreignTransactionFee": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Foreign transaction fee as decimal (e.g., 0.03 for 3%). 0 if no fee."
          }
        },
        "required": ["annualFee", "aprPurchase", "foreignTransactionFee"]
      },
      "rewards": {
        "type": "object",
        "description": "Rewards structure and rates",
        "properties": {
          "baseRate": {
            "type": "number",
            "minimum": 0,
            "description": "Base reward rate on all purchases (as decimal, e.g., 0.015 for 1.5%)"
          },
          "categoryRates": {
            "type": "object",
            "description": "Reward rates by spending category (all 12 standard categories)",
            "properties": {
              "dining": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for dining (restaurants, cafes, fast food) as decimal"
              },
              "groceries": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for groceries (supermarkets) as decimal"
              },
              "gas": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for gas / EV charging as decimal"
              },
              "travel": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for travel (airlines, hotels, rentals, cruises) as decimal"
              },
              "transit": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for transit (rideshare, parking, tolls, public transit) as decimal"
              },
              "drugstores": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for drugstores / pharmacies as decimal"
              },
              "streaming": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for streaming / subscriptions as decimal"
              },
              "onlineShopping": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for online shopping / retail as decimal"
              },
              "entertainment": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for entertainment as decimal"
              },
              "homeImprovement": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for home improvement as decimal"
              },
              "utilities": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for utilities / phone bill as decimal"
              },
              "other": {
                "type": "number",
                "minimum": 0,
                "description": "Reward rate for everything else as decimal"
              }
            },
            "required": [
              "dining",
              "groceries",
              "gas",
              "travel",
              "transit",
              "drugstores",
              "streaming",
              "onlineShopping",
              "entertainment",
              "homeImprovement",
              "utilities",
              "other"
            ]
          },
          "caps": {
            "type": "object",
            "description": "Spending caps per category (yearly or quarterly limits before rate drops). Only include categories that have caps.",
            "properties": {
              "dining": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "Cap amount in dollars"
                  },
                  "period": {
                    "type": "string",
                    "enum": ["yearly", "quarterly", "monthly"],
                    "description": "Period for the cap"
                  }
                }
              },
              "groceries": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "period": {
                    "type": "string",
                    "enum": ["yearly", "quarterly", "monthly"]
                  }
                }
              },
              "gas": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "period": {
                    "type": "string",
                    "enum": ["yearly", "quarterly", "monthly"]
                  }
                }
              },
              "travel": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "period": {
                    "type": "string",
                    "enum": ["yearly", "quarterly", "monthly"]
                  }
                }
              },
              "streaming": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "period": {
                    "type": "string",
                    "enum": ["yearly", "quarterly", "monthly"]
                  }
                }
              }
            }
          },
          "rotatingCategories": {
            "type": "object",
            "description": "Rotating category bonuses (e.g., Discover it, Chase Freedom Flex)",
            "properties": {
              "enabled": {
                "type": "boolean",
                "description": "Does this card have rotating categories?"
              },
              "rate": {
                "type": "number",
                "minimum": 0,
                "description": "Bonus rate for rotating categories (as decimal, e.g., 0.05 for 5%)"
              },
              "cap": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number",
                    "description": "Spending cap in dollars per quarter"
                  },
                  "period": {
                    "type": "string",
                    "enum": ["quarterly"],
                    "description": "Always quarterly for rotating categories"
                  }
                }
              },
              "activationRequired": {
                "type": "boolean",
                "description": "Does user need to activate rotating categories each quarter?"
              },
              "categories": {
                "type": "array",
                "items": {
                  "type": "string",
                  "description": "List of possible categories that rotate (e.g., ['gas', 'groceries', 'restaurants', 'streaming'])"
                },
                "description": "Possible categories that can be included in rotation"
              }
            }
          },
          "signUpBonus": {
            "type": "object",
            "description": "Sign-up bonus offer",
            "properties": {
              "amount": {
                "type": "number",
                "minimum": 0,
                "description": "Bonus amount in dollars (cash value equivalent for points-based cards)"
              },
              "spendRequired": {
                "type": "number",
                "minimum": 0,
                "description": "Minimum spending required in dollars to earn bonus"
              },
              "monthsToComplete": {
                "type": "number",
                "minimum": 1,
                "description": "Number of months to complete the spending requirement"
              },
              "description": {
                "type": "string",
                "description": "Human-readable description of the bonus offer"
              }
            },
            "required": ["amount", "spendRequired", "monthsToComplete"]
          }
        },
        "required": ["baseRate", "categoryRates"]
      },
      "travelPerks": {
        "type": "object",
        "description": "Travel-related perks and benefits (for purpose=Travel filtering)",
        "properties": {
          "noForeignTxFee": {
            "type": "boolean",
            "description": "No foreign transaction fees"
          },
          "tripDelayCoverage": {
            "type": "boolean",
            "description": "Trip delay insurance coverage"
          },
          "baggageDelayCoverage": {
            "type": "boolean",
            "description": "Baggage delay insurance coverage"
          },
          "lostLuggageCoverage": {
            "type": "boolean",
            "description": "Lost or damaged luggage coverage"
          },
          "rentalCarCDW": {
            "type": "boolean",
            "description": "Rental car collision damage waiver (primary or secondary coverage)"
          },
          "loungeAccess": {
            "type": "boolean",
            "description": "Airport lounge access (Priority Pass, Centurion Lounge, etc.)"
          },
          "travelPortalBonus": {
            "type": "boolean",
            "description": "Bonus points/miles when booking through issuer's travel portal"
          },
          "travelInsurance": {
            "type": "boolean",
            "description": "General travel insurance coverage"
          },
          "tsaPrecheckCredit": {
            "type": "number",
            "minimum": 0,
            "description": "TSA PreCheck or Global Entry fee credit amount (0 if not offered)"
          },
          "annualTravelCredit": {
            "type": "number",
            "minimum": 0,
            "description": "Annual travel credit amount in dollars (0 if not offered)"
          },
          "concierge": {
            "type": "boolean",
            "description": "Concierge service available"
          },
          "transferPartners": {
            "type": "boolean",
            "description": "Can transfer points/miles to airline/hotel partners"
          }
        },
        "required": [
          "noForeignTxFee",
          "tripDelayCoverage",
          "baggageDelayCoverage",
          "lostLuggageCoverage",
          "rentalCarCDW",
          "loungeAccess",
          "travelPortalBonus",
          "travelInsurance",
          "tsaPrecheckCredit",
          "annualTravelCredit",
          "concierge",
          "transferPartners"
        ]
      },
      "businessFeatures": {
        "type": "object",
        "description": "Business-specific features (for purpose=Business filtering)",
        "properties": {
          "employeeCards": {
            "type": "boolean",
            "description": "Can issue employee cards (free or with fee)"
          },
          "employeeCardFee": {
            "type": "number",
            "minimum": 0,
            "description": "Fee per employee card (0 if free)"
          },
          "expenseTools": {
            "type": "boolean",
            "description": "Expense management and tracking tools"
          },
          "yearEndSummary": {
            "type": "boolean",
            "description": "Year-end spending summary/reporting"
          },
          "vendorPayments": {
            "type": "boolean",
            "description": "Vendor payment capabilities"
          },
          "accountingIntegration": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Integration with accounting software (e.g., ['QuickBooks', 'Xero', 'Sage'])"
          },
          "spendingLimits": {
            "type": "boolean",
            "description": "Set spending limits per employee card"
          },
          "categoryRestrictions": {
            "type": "boolean",
            "description": "Set category restrictions for employee cards"
          },
          "receiptCapture": {
            "type": "boolean",
            "description": "Receipt capture and management"
          }
        },
        "required": [
          "employeeCards",
          "employeeCardFee",
          "expenseTools",
          "yearEndSummary",
          "vendorPayments"
        ]
      },
      "eligibility": {
        "type": "object",
        "description": "Eligibility requirements",
        "properties": {
          "minAge": {
            "type": "number",
            "minimum": 18,
            "maximum": 21,
            "description": "Minimum age requirement (typically 18 or 21)"
          },
          "creditScoreMin": {
            "type": "number",
            "minimum": 300,
            "maximum": 850,
            "description": "Minimum credit score required (approximate range)"
          },
          "creditScoreMax": {
            "type": "number",
            "minimum": 300,
            "maximum": 850,
            "description": "Maximum credit score (for secured cards, etc.)"
          },
          "requiresIncome": {
            "type": "boolean",
            "description": "Requires proof of income"
          },
          "minIncome": {
            "type": "number",
            "minimum": 0,
            "description": "Minimum annual income required (if specified)"
          },
          "requiresCosignerUnder21": {
            "type": "boolean",
            "description": "Requires cosigner if applicant is under 21 (Reg Z)"
          }
        },
        "required": ["minAge"]
      },
      "trust": {
        "type": "object",
        "description": "Data verification and sourcing",
        "properties": {
          "lastVerifiedDate": {
            "type": "string",
            "format": "date",
            "description": "Last date this card's information was verified (ISO 8601 format: YYYY-MM-DD)"
          },
          "sourceUrl": {
            "type": "string",
            "format": "uri",
            "description": "Link to issuer's official product page for this card"
          },
          "termsUrl": {
            "type": "string",
            "format": "uri",
            "description": "Link to card terms and conditions"
          },
          "dataSource": {
            "type": "string",
            "description": "Source of the data (e.g., 'issuer_website', 'public_disclosure', 'manual_research')"
          }
        },
        "required": ["lastVerifiedDate", "sourceUrl"]
      },
      "description": {
        "type": "string",
        "description": "Brief marketing description of the card"
      },
      "highlights": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Key selling points and highlights (bullet points)"
      }
    }
  }
}
